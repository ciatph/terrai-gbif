
<!DOCTYPE html>
<html>
<head>
	
	<title>Terrai - GBIF Demo</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
    <script src="js/legend.js" type="text/javascript"></script>
    <script src="js/map.js" type="text/javascript"></script>

    <style type="text/css">
        body, html {
            margin: 0px;
        }

        .info-legend {
            background-color: rgba(255, 255, 255, 0.5);
            padding: 10px;
        }        

        .circle {
            width: 5px;
            height: 5px;
        }

        @media (min-width: 768px) {
            html {
                font-size: 16px;
            }
        }

        .maparea {
            padding: 0px;
            margin: 0px;
            position: relative;
            margin-top: 70px;
        }

        .border-top { border-top: 1px solid #e5e5e5; }
        .border-bottom { border-bottom: 1px solid #e5e5e5; }

        .box-shadow { box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05); }        
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" id="nav">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu" aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarMenu">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#"><h3>Latin America</h3> <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#"><h3>Asia</h3></a>
                </li>
              </ul>
            </div>
          </nav>
          
    <!-- Page Content -->
    <div class="col-md-12 maparea">
        <!-- map: latin america -->
        <div id="mapid" style="width: 100%; height:100%; "></div>

        <!-- map: asia -->
        <div id="mapid_asia" style="width: 100%; height:100%; "></div>        
    </div>


<script>
    var layerToggle;
    var map;
    var latin_base;

    var layers = {};
    var sublayers = [];
    var basemap;

    window.onload = function(){
        // set window fullscreen height
        var mapDom = document.getElementById('mapid');
        mapDom.style.height = window.innerHeight + 'px';

        // add OpenStreetMap basemap
        basemap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        });

        mapLatin = new Map();
        mapLatin.init([-26.11598592533351, -81.91406250000001], 4, true);        

        mapLatin.addLayer({
            name: 'latin_base', layers: 'terrai-gbif:latin_terra_I_resamp_fromedit',
            attribution: 'Latin America Basemap', styles: 'terrai-base' 
        });

        mapLatin.addLayer({
            name: 'p_andina', layers: 'terrai-gbif:p_andina',
            attribution: 'Prumnopitys Andina', styles: 'terrai-species'
        });    
        
        mapLatin.addLayer({
            name: 'p_salignus', layers: 'terrai-gbif:podocarpus_salignus',
            attribution: 'Podocarpus Salignus', styles: 'terrai-species-2'
        });          

        mapLatin.addLayer({
            name: 'p_uviferum', layers: 'terrai-gbif:pilgerodendron_uviferum',
            attribution: 'Pilgerodendron Uviferum', styles: 'terrai-species-3'
        });           
        
        mapLatin.addLayer({
            name: 'p_andina_add', layers: 'terrai-gbif:p_andina_add',
            attribution: 'Prumnopitys Andina Add', styles: 'terrai-species'
        });     
        
        mapLatin.addLayer({
            name: 'p_salignus_add', layers: 'terrai-gbif:p_salignus_add',
            attribution: 'Podocarpus Salignus Add', styles: 'terrai-species-2'
        });     
        
        mapLatin.addLayer({
            name: 'p_uviferum_add', layers: 'terrai-gbif:p_uviferum_add',
            attribution: 'Pilgerodendron Uviferum Add', styles: 'terrai-species-3'
        });           
        
        var baseMaps = {
            "Latin America Base Map": basemap
        };

        // main map
        map = L.map('mapid', {
            center: mapLatin.center,
            zoom: mapLatin.zoom,
            layers: [basemap]
        });    

        layerToggle = L.control.layers(baseMaps, mapLatin.getOverlays()).addTo(map);
        L.control.scale().addTo(map);

        l = createLegend();
        l.addTo(map);
    };

</script>


<script src="js/jquery-3.3.1.slim.min.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>

</body>
</html>
